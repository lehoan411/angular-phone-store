<div class="profile-wrapper">
  <div class="profile-container">

    <div class="sidebar">
      <div class="sidebar-item" [class.active]="selectedTab === 'profile'" 
           (click)="selectedTab = 'profile'">Edit Profile</div>

      <div class="sidebar-item" [class.active]="selectedTab === 'password'" 
           (click)="selectedTab = 'password'">Change Password</div>
    </div>

    <div class="content">

      @if (selectedTab === 'profile'|| !selectedTab && currentUser) {

      <div class="profile-card" [formGroup]="profileForm">

        <h2 class="title">Edit Profile</h2>

        <div class="form-group avatar-group">

          <div class="avatar-wrapper" (click)="triggerFileInput()">
            <img 
              [src]="previewAvatar || 'https://cdn.pixabay.com/photo/2021/07/02/04/48/user-6380868_960_720.png'" 
              class="avatar-preview"
            />
          </div>

          <input type="file" #fileInput accept="image/*" hidden
                 (change)="handleAvatarChange($event)" />
        </div>

        <div class="form-group">
          <label>Email</label>
          <input type="text" formControlName="email" />
        </div>

        <div class="form-group">
          <label>Address</label>
          <input type="text" formControlName="address" />
        </div>

        <div class="form-group">
          <label>Phone</label>
          <input type="text" formControlName="phone" />
        </div>

        <button class="btn-submit" (click)="handleProfileUpdate()">Save Changes</button>

      </div>
      }

      @if (selectedTab === 'password') {
      <div class="profile-card" [formGroup]="passwordForm">
        <h2 class="title">Change Password</h2>

        <div class="form-group">
          <label>Current Password</label>
          <input type="password" formControlName="currentPassword" />
        </div>

        <div class="form-group">
          <label>New Password</label>
          <input type="password" formControlName="newPassword" />
        </div>

        <div class="form-group">
          <label>Confirm New Password</label>
          <input type="password" formControlName="confirmPassword" />
        </div>

        <button class="btn-submit" (click)="handleChangePassword()">Update Password</button>
      </div>
      }

    </div>
  </div>
</div>
